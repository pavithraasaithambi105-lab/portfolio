/* Assistant: Elegant Minimal style (floating + chat popup) */

.assistant {
  position: fixed;
  right: 26px;
  bottom: 26px;
  width: 78px;
  height: 78px;
  border-radius: 50%;
  z-index: 10050;
  cursor: pointer;
  transform-origin: center;
  transition: transform 0.35s cubic-bezier(.2,.9,.2,1), box-shadow 0.25s;
  display: flex;
  align-items: center;
  justify-content: center;
  will-change: transform;
  outline: none;
}

/* gentle float animation */
@keyframes assistantFloat {
  0% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-8px) rotate(-1deg); }
  100% { transform: translateY(0) rotate(0deg); }
}
.assistant { animation: assistantFloat 4s ease-in-out infinite; }

/* hover tilt */
.assistant:hover { transform: scale(1.06) translateY(-4px) rotate(-0.6deg); box-shadow: 0 14px 36px rgba(0,0,0,0.5); }

/* image wrapper */
.assistant-img-wrap { position: relative; width: 78px; height: 78px; border-radius: 50%; overflow: hidden; display:inline-block; }

/* assistant image */
.assistant-img { width: 100%; height: 100%; object-fit: cover; display:block; transition: transform 0.18s ease; user-select:none; pointer-events:none; }

/* speaking subtle scale */
.assistant-speaking { transform: translateY(-1px) scale(1.02); filter: drop-shadow(0 6px 26px rgba(140,0,255,0.12)); }

/* blink overlay: a semi-opaque band that animates down/up to simulate blink */
.assistant-blink {
  position: absolute;
  left: 0;
  right: 0;
  top: -100%;
  height: 100%;
  background: linear-gradient(180deg, rgba(12,6,18,0.2), rgba(12,6,18,0.35));
  transform: translateY(-100%);
  pointer-events: none;
  animation: blinkCycle 6.5s ease-in-out infinite;
  mix-blend-mode: multiply;
  opacity: 0.95;
}
@keyframes blinkCycle {
  0% { transform: translateY(-100%); opacity: 0; }
  86% { transform: translateY(-100%); opacity: 0; }
  88% { transform: translateY(0%); opacity: 1; }
  90% { transform: translateY(-100%); opacity: 0; }
  100% { transform: translateY(-100%); opacity: 0; }
}

/* small mouth indicator (a rounded rectangle at bottom, pulses when speaking) */
.assistant-mouth {
  position: absolute;
  left: 50%;
  bottom: 10%;
  transform: translateX(-50%) scaleY(0.9);
  width: 36%;
  height: 8%;
  border-radius: 6px;
  background: linear-gradient(90deg, rgba(255,255,255,0.85), rgba(240,240,255,0.6));
  opacity: 0.25;
  transition: transform 0.12s ease, opacity 0.12s;
  pointer-events: none;
}
.assistant-mouth--on {
  opacity: 1;
  transform: translateX(-50%) scaleY(1.6);
  box-shadow: 0 6px 18px rgba(140,0,255,0.14);
}

/* Chat popup styles */
.assistant-chat {
  position: fixed;
  right: 116px;
  bottom: 26px;
  width: 340px;
  max-width: calc(100% - 56px);
  height: 420px;
  transform: translateY(18px) scale(0.95);
  opacity: 0;
  pointer-events: none;
  z-index: 10060;
  transition: all 0.28s cubic-bezier(.2,.9,.2,1);
  border-radius: 14px;
  overflow: hidden;
  background: linear-gradient(180deg, rgba(10,8,14,0.98), rgba(14,10,20,0.98));
  border: 1px solid rgba(140,0,255,0.12);
  box-shadow: 0 20px 60px rgba(0,0,0,0.6), inset 0 0 30px rgba(140,0,255,0.02);
  display: flex;
  flex-direction: column;
}

/* open state */
.assistant-chat--open { transform: translateY(0) scale(1); opacity: 1; pointer-events: auto; }

/* header */
.assistant-chat-header { display:flex;align-items:center;justify-content:space-between;padding:12px 12px;border-bottom:1px solid rgba(140,0,255,0.04); }
.assistant-chat-title { font-weight:600; color:#fff; letter-spacing:0.2px; text-shadow:0 0 10px rgba(140,0,255,0.06); }
.assistant-close { background:transparent;border:none;color:rgba(255,255,255,0.75);cursor:pointer;font-size:16px;padding:6px;border-radius:8px }
.assistant-close:hover{background:rgba(255,255,255,0.02)}

/* chat body */
.assistant-chat-body { padding:12px; flex:1; overflow:auto; display:flex;flex-direction:column; gap:10px; }

/* chat rows */
.chat-row { display:flex; }
.chat-row--bot { justify-content:flex-start; }
.chat-row--user { justify-content:flex-end; }

/* bubbles */
.chat-bubble {
  max-width:78%;
  padding:10px 12px;
  border-radius:12px;
  font-size:0.95rem;
  line-height:1.25;
  color:#fff;
  background:linear-gradient(90deg, rgba(110,0,255,0.12), rgba(80,0,180,0.12));
  border:1px solid rgba(140,0,255,0.06);
  box-shadow: 0 6px 20px rgba(0,0,0,0.45);
}
.chat-row--user .chat-bubble {
  background: linear-gradient(90deg, rgba(180,180,255,0.08), rgba(220,220,255,0.05));
  border:1px solid rgba(255,255,255,0.04);
  color:#fff;
}

/* typing dots */
.chat-bubble--typing { display:flex; gap:6px; align-items:center; padding:8px 12px; background:linear-gradient(90deg, rgba(140,0,255,0.06), rgba(255,0,204,0.03)); }
.chat-bubble--typing .dot { width:7px; height:7px; background:rgba(255,255,255,0.85); border-radius:50%; opacity:0.9; animation: dotPulse 1s infinite; }
.chat-bubble--typing .dot:nth-child(2){ animation-delay:0.12s }
.chat-bubble--typing .dot:nth-child(3){ animation-delay:0.26s }
@keyframes dotPulse { 0%{ transform:translateY(0); opacity:0.6 } 50%{ transform:translateY(-6px); opacity:1 } 100%{ transform:translateY(0); opacity:0.6 } }

/* form */
.assistant-chat-form { padding:10px; display:flex; gap:8px; align-items:center; border-top:1px solid rgba(140,0,255,0.03); }
.chat-input { flex:1; padding:10px 12px; border-radius:10px; border:1px solid rgba(140,0,255,0.08); background:rgba(255,255,255,0.02); color:#fff; outline:none; }
.chat-input::placeholder{ color:rgba(200,180,255,0.55) }
.send-btn { background:linear-gradient(90deg, #8c00ff, #ff3ecb); color:#fff; padding:10px 12px; border-radius:10px; border:none; display:inline-flex; gap:6px; align-items:center; cursor:pointer }
.mic-btn { width:40px; height:40px; border-radius:10px; background:rgba(255,255,255,0.02); border:1px solid rgba(140,0,255,0.06); display:inline-flex; align-items:center; justify-content:center; cursor:pointer; color:#fff }

/* mic listening */
.mic-btn.listening { background:linear-gradient(90deg,#ff7bd1,#9bffdf); color:#111; box-shadow:0 8px 28px rgba(0,0,0,0.45) }

/* responsive */
@media (max-width:640px) {
  .assistant { right: 18px; bottom: 18px; }
  .assistant-chat { right: 12px; bottom: 18px; width: 92%; left: 12px; max-width:unset; }
}
